name = "myrqai-worker"
main = "worker.js"
compatibility_date = "2026-02-20"
compatibility_flags = ["nodejs_compat"]

# Global Migrations (Keep this at the top level)
[[migrations]]
tag = "v2" 
new_classes = ["GhostRoom"]

# ---------- DEV ENVIRONMENT ----------
[env.dev]
name = "myrqai-development"

# You must repeat the binding here for the 'dev' environment
[env.dev.durable_objects]
bindings = [{name = "GHOST_ROOMS", class_name = "GhostRoom"}]

[env.dev.vars]
ENV = "dev"
ALLOWED_ORIGIN = "https://myrqai-development.pages.dev"
# UPSTASH_REDIS_REST_URL = "..." (Add your Redis URL here)


# ---------- PROD ENVIRONMENT ----------
[env.prod]
name = "myrqai-prod"

# You must repeat the binding here for the 'prod' environment
[env.prod.durable_objects]
bindings = [{name = "GHOST_ROOMS", class_name = "GhostRoom"}]

[env.prod.vars]
ENV = "prod"
ALLOWED_ORIGIN = "https://myrqai-prod.pages.dev"
# UPSTASH_REDIS_REST_URL = "..." (Add your Redis URL here)
