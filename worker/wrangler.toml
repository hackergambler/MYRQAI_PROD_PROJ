name = "myrqai-worker"
main = "worker.js"
compatibility_date = "2026-02-20"
compatibility_flags = ["nodejs_compat"]

############################
# GLOBAL DURABLE OBJECTS
############################

[[migrations]]
tag = "v1"
new_classes = ["GhostRoom"]

############################
# DEVELOPMENT ENVIRONMENT
############################

[env.dev]
name = "myrqai-development"

[env.dev.durable_objects]
bindings = [
  { name = "GHOST_ROOMS", class_name = "GhostRoom" }
]

[env.dev.vars]
ENV = "dev"
ALLOWED_ORIGINS = "https://myrqai-development.pages.dev,http://localhost:8788,http://127.0.0.1:8788"


############################
# PRODUCTION ENVIRONMENT
############################

[env.prod]
name = "myrqai-prod"

# Route your worker on main domain under /api*
routes = [
  { pattern = "myrqai.com/api*", zone_name = "myrqai.com" },
  { pattern = "www.myrqai.com/api*", zone_name = "myrqai.com" }
]

[env.prod.durable_objects]
bindings = [
  { name = "GHOST_ROOMS", class_name = "GhostRoom" }
]

[env.prod.vars]
ENV = "prod"
ALLOWED_ORIGINS = "https://myrqai.com,https://www.myrqai.com,https://myrqai-prod.tibco-tibco-8.pages.dev"